apiVersion: v1
kind: ConfigMap
metadata:
  name: agentforge-config
  namespace: agentforge
  labels:
    app.kubernetes.io/component: config
data:
  # Service Configuration
  AF_ENVIRONMENT: "base"
  AF_SERVICE_VERSION: "0.1.0"
  AF_LOG_LEVEL: "INFO"
  AF_LOG_FORMAT: "json"
  
  # HTTP Server
  AF_HOST: "0.0.0.0"
  AF_PORT: "8000"
  AF_WORKERS: "1"
  
  # Database - Production Distributed
  AF_DATABASE_URL: "postgresql://agentforge:${AF_DB_PASSWORD}@postgres-cluster:5432/agentforge"
  AF_DB_POOL_SIZE: "100"
  AF_DB_MAX_OVERFLOW: "200"
  AF_DB_DISTRIBUTED_SHARDING: "true"
  AF_DB_READ_REPLICAS: "5"
  
  # Redis
  AF_REDIS_HOST: "redis-service"
  AF_REDIS_PORT: "6379"
  AF_REDIS_DB: "0"
  
  # NATS
  AF_NATS_URL: "nats://nats-service:4222"
  AF_NATS_MAX_RECONNECT: "60"
  AF_NATS_RECONNECT_WAIT: "2"
  
  # Observability
  AF_METRICS_ENABLED: "true"
  AF_METRICS_PORT: "9090"
  AF_TRACING_ENABLED: "false"
  
  # Security
  AF_API_KEY_REQUIRED: "false"
  AF_RATE_LIMIT_ENABLED: "true"
  AF_RATE_LIMIT_REQUESTS: "100"
  AF_RATE_LIMIT_WINDOW: "60"
  
  # Agent Settings - Million Scale Production
  AF_MAX_AGENTS: "1000000"
  AF_AGENT_TIMEOUT: "300"
  AF_TASK_QUEUE_SIZE: "100000"
  AF_AGENT_SCALING_ENABLED: "true"
  AF_QUANTUM_COORDINATION_ENABLED: "true"
  AF_NEURAL_MESH_ENABLED: "true"
  
  # Memory Settings
  AF_MEMORY_TTL: "604800"
  AF_MEMORY_PRUNE_THRESHOLD: "10000"
  AF_EMBEDDINGS_BACKEND: "hash"
  
  # LLM Settings
  AF_OPENAI_MODEL: "gpt-4"
  AF_ANTHROPIC_MODEL: "claude-3-5-sonnet-20241022"
  AF_GOOGLE_MODEL: "gemini-1.5-pro"
  
  # Development/Testing
  AF_MOCK_LLM: "false"
  AF_DEBUG: "false"
  AF_TEST_MODE: "false"
  
  # Service-specific settings
  # Swarm - Million Scale Configuration
  AF_SWARM_SIZE: "1000"
  AF_SWARM_SCALING_ENABLED: "true"
  AF_SWARM_MAX_SIZE: "1000000"
  AF_SWARM_MIN_SIZE: "100"
  AF_MEGA_SWARM_ENABLED: "true"
  AF_QUANTUM_SCHEDULER_ENABLED: "true"
  AF_HIERARCHICAL_CLUSTERS_ENABLED: "true"
  
  # Orchestrator - Million Scale
  AF_MAX_CONCURRENT_JOBS: "10000"
  AF_JOB_TIMEOUT: "3600"
  AF_PLANNING_TIMEOUT: "60"
  AF_SLA_ENABLED: "true"
  AF_HITL_ENABLED: "true"
  AF_INTELLIGENT_SCALING: "true"
  AF_DYNAMIC_LOAD_BALANCING: "true"
  
  # Memory
  AF_MESH_MODE: "distributed"
  AF_MESH_SYNC_INTERVAL: "30"
  AF_VECTOR_DIMENSIONS: "384"
  AF_VECTOR_THRESHOLD: "0.7"
  
  # Communications Gateway
  AF_WEBSOCKET_ENABLED: "true"
  AF_MAX_WEBSOCKET_CONNECTIONS: "1000"
  AF_MESSAGE_QUEUE_SIZE: "10000"
  
  # Route Engine
  AF_MAX_ROUTE_DISTANCE: "1000.0"
  AF_ROUTE_TIMEOUT: "30"
  AF_MAX_ALTERNATE_ROUTES: "5"

---
apiVersion: v1
kind: ConfigMap
metadata:
  name: agentforge-nginx-config
  namespace: agentforge
  labels:
    app.kubernetes.io/component: nginx-config
data:
  nginx.conf: |
    upstream agentforge-swarm {
        server agentforge-swarm-service:8000;
    }
    
    upstream agentforge-orchestrator {
        server agentforge-orchestrator-service:8000;
    }
    
    upstream agentforge-comms-gateway {
        server agentforge-comms-gateway-service:8000;
    }
    
    server {
        listen 80;
        server_name _;
        
        # Health check endpoint
        location /health {
            access_log off;
            return 200 "healthy\n";
            add_header Content-Type text/plain;
        }
        
        # API routes
        location /api/v1/swarm/ {
            proxy_pass http://agentforge-swarm/;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
        }
        
        location /api/v1/orchestrator/ {
            proxy_pass http://agentforge-orchestrator/;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
        }
        
        location /api/v1/comms/ {
            proxy_pass http://agentforge-comms-gateway/;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
            
            # WebSocket support
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
        }
        
        # Default route
        location / {
            proxy_pass http://agentforge-swarm/;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
        }
    }
